<div class="dashboard container-fluid min-vh-100 py-5">

  <!-- STATISTIQUES HORIZONTALES -->
  <div class="stats-container d-flex flex-nowrap gap-3 mb-5 overflow-auto">
    <div *ngFor="let stat of statistiques" class="stat-card p-4 shadow-sm rounded text-center">
      <div class="stat-icon mb-2">
        <i class="bi fs-2" [ngClass]="stat.icone"></i>
      </div>
      <h4 class="fw-bold text-dark mb-1">{{ stat.valeur }}</h4>
      <p class="small text-muted m-0">{{ stat.titre }}</p>
    </div>
  </div>

  <!-- PLACEHOLDER pendant SSR -->
  <ng-template #chartPlaceholder>
    <div class="row g-4">
      <div class="col-12 col-md-6" *ngFor="let _ of [0,1,2,3,4,5]">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-header bg-white fw-bold text-primary">Chargementâ€¦</div>
          <div class="card-body">
            <div style="height:220px" class="bg-light w-100"></div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- âœ… GRAPHIQUES: rendus UNIQUEMENT au navigateur -->
  <ng-container *ngIf="isBrowser; else chartPlaceholder">
    <div class="row g-4">
      <div class="col-12 col-md-6" *ngFor="let chart of charts">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-header bg-white fw-bold text-primary">{{ chart.title }}</div>
          <div class="card-body">
            <canvas
              baseChart
              [data]="chart.data"
              [options]="chart.options"
              [type]="chart.type">
            </canvas>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- PROJETS RÃ‰CENTS -->
  <div class="row g-4 mt-4">
    <div class="col-12">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-header bg-white fw-bold text-primary">ðŸ“‹ Projets rÃ©cents</div>
        <div class="card-body">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Nom</th>
                <th>Organisation</th>
                <th>Statut</th>
                <th>Dons</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let projet of projetsRecents">
                <td>{{ projet.nom }}</td>
                <td>{{ projet.organisation }}</td>
                <td>{{ projet.statut }}</td>
                <td>{{ projet.dons }} $</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

</div>
